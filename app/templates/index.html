{% extends "base.html" %}
{% import "bootstrap/wtf.html" as wtf %}
{% import "_macros.html" as macros %}

{% block title %}Flasky{% endblock %}

{% block page_content %}
<div class="page-header">
    <h1>Hello, {% if current_user.is_authenticated %}{{ current_user.username }}{% else %}Stranger{% endif %}!</h1>
</div>
<div>
    {% if current_user.can(Permission.WRITE) %}
    {# {{ wtf.quick_form(form) }} #}
    <form class="form form-horizontal" method="post" role="form">
      {{ form.hidden_tag() }}
      {{ wtf.form_errors(form, hiddens="only") }}
      {{ wtf.form_field(form.title) }}
      {{ wtf.form_field(form.alias) }}
      {{ wtf.form_field(form.body) }}
      <div class="form-group" id="tags-control">
	{{ form.tags.label(class="control-label") }}
	{{ form.tags(class="form-control typeahead", **{'data-role': 'tagsinput'}) }}
      </div>
      {{ wtf.form_field(form.category) }}
      <div class="form-group">
	{{ wtf.form_field(form.submit) }}
      </div>
    </form>
    {% endif %}
</div>
<div>
  {% include '_posts.html' %}
</div>
{% if pagination %}
<div class="pagination">
    {{ macros.pagination_widget(pagination, '.index') }}
</div>
{% endif %}
{% endblock %}

{% block scripts %}
{{ super() }}
{{ pagedown.include_pagedown() }}
{% endblock %}
