{% extends "ctrl/base.html" %}
{% import "bootstrap/wtf.html" as wtf %}
{% import "_macros.html" as macros %}

{% block title %}File Uploads - MMSE{% endblock %}

{% block page_content %}
<div class="page-header">
    <h1>Hello, {% if current_user.is_authenticated %}{{ current_user.username }}{% else %}Stranger{% endif %}!</h1>
</div>
<div>
    {% if current_user.can(Permission.WRITE_ARTICLES) %}
    <form class="form form-horizontal" method="post" role="form" enctype="multipart/form-data">
      {{ form.hidden_tag() }}
      {{ wtf.form_errors(form, hiddens="only") }}

     <div class="form-group {% if form.image.errors %}has-error{% endif %}">
	{{ form.image.label(class="control-label") }}
	{{ form.image(class="") }}
	{% if form.image.errors %}
	<span class="help-block">
	 {% for error in form.image.errors %}
	   {{ error }}
	 {% endfor %}
	</span>{% endif %}
     </div>

     {{ wtf.form_field(form.title) }}
     
     <div class="form-group">
	{{ wtf.form_field(form.submit) }}
     </div>
    </form>
    {% endif %}
</div>
<div>
  {% include 'ctrl/_uploads.html' %}
</div>

<div class="pagination">
  {% for image in images %}
  <a href="{{ url_for('.uploaded_file', filename=image ) }}">
    <img src="{{ image | thumbnail('100x100', crop='fit', quality=75) }}"
	 class="img-responsive img-thumbnail"
	 title="{{ image }}" alt="{{ image }}">
  </a>
    {% endfor %}
</div>
{% endblock %}

{% block scripts %}
 {{ super() }}
 {{ pagedown.include_pagedown() }}
{% endblock %}
